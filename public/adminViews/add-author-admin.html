<script type="text/javascript" src="js/blog.js"></script>

<script>
    $(document).ready(function () {
        $("#txtEditor").Editor();
    });

    var idName = "";
    $(document).on("click", "#uploadImage1", function () {
        idName = "#backImage1";
        $.get("/getImages", function (response) {
            $("#InsertImage .modal-body").html("");
            $("#InsertImage .modal-body").append("<button class='uploadFiles' class='btn btn-default'>Upload Files</button><div id='myId' class='dropzone'></div>");
            $("#InsertImage .modal-body").append("<div id='thumbwrap'/></div><div style='clear: both;'></div> ");
            $("#thumbwrap").html("");
            $.each(response, function (k, data) {
                $("#thumbwrap").append("<img data-dismiss='modal' width=100 height=60  src='" + data.path + "'/>");

            });
        });
    });


    $(document).on('click', '#InsertImage img', function (e) {
        if (idName == "#backImage1") {
            $(idName).html('<img width=100 height=60 src="' + $(this).attr('src') + '"/>');
        } else {
            $(".Editor-editor").append('<img width=500 height=300 src="' + $(this).attr('src') + '"/>');
        }
        e.stopImmediatePropagation();
    });


    $(document).on("click", ".uploadFiles", function () {
        $("#myId").css("display", "block");
        var myDropzone = new Dropzone("div#myId", {
            url: "/uploadImages",
            dictDefaultMessage: "Click or Drop files here to upload",
            acceptedFiles: "image/jpeg,image/png,image/gif",
            parallelUploads: 10,
            maxFilesize: 1,

            init: function () {

                // You might want to show the submit button only when
                // files are dropped here:
                this.on("addedfile", function () {
                    // Show submit button here and/or inform user to click it.
                });
                this.on("success", function () {
                    myDropzone.removeAllFiles();
                    $.get("/getImages", function (response) {
                        $("#thumbwrap").html("");
                        $.each(response, function (k, data) {
                            $("#thumbwrap").append("<img data-dismiss='modal' width=100 height=60  src='" + data.path + "'/>");

                        });
                    });
                })

            }
        });
    });

</script>


<style>
    #myId {
        display: none;
    }

    #thumbwrap img {
        border: 1px solid silver;
        margin: 10px;
        float: left;
    }

</style>
<div ng-include src="'adminViews/partials/header.html'"></div>


<div class="content">


    <div class="inner"><h1>Author &nbsp; <a href="/list-authors-admin" class="small gray">Cancel</a></h1></div>




    <div class="clearfix"></div>
    <div id="content-main">

        <form enctype="multipart/form-data" action="" method="post" id="author_form" class="form-horizontal">

            <div>


                <div class="inner">


                    <fieldset class="module aligned default">
                        <h2>Settings</h2>


                        <div class="form-row field-published">


                            <div class="">


                                <div class="form-group-checkbox">
                                    <label class="checkbox">
                                        <input id="id_active" name="active" type="checkbox">
                                        <label class="vCheckboxLabel" for="id_active">Active</label>
                                    </label>

                                </div>


                            </div>

                        </div>

                        <div class="form-row field-first_name">


                            <div class="required">


                                <div class="form-group">
                                    <label for="id_first_name" class="">First name</label>

                                    <div class="control-group">

                                        <input class="vTextField" id="id_first_name" maxlength="100" name="first_name"
                                               type="text">


                                    </div>

                                </div>


                            </div>

                        </div>

                        <div class="form-row field-last_name">


                            <div class="required">


                                <div class="form-group">
                                    <label for="id_last_name" class="">Last name</label>

                                    <div class="control-group">

                                        <input class="vTextField" id="id_last_name" maxlength="100" name="last_name"
                                               type="text">


                                    </div>

                                </div>


                            </div>

                        </div>

                        <div class="form-row">
                            <div class="field-box">


                                <div class="form-group">
                                    <label for="backImage1" class="">Profile Pic</label>
                                    <div class="control-group">
                                        <a id="uploadImage1" href="#InsertImage" role="button" class="btn btn-default"
                                           data-toggle="modal"
                                           title="Insert Image">Choose / Upload Image</a>

                                        <div id="backImage1"></div>
                                    </div>

                                </div>

                            </div>
                        </div>

                        <div class="form-row field-order_id">


                            <div class="">


                                <div class="form-group">
                                    <label for="id_order_id" class="">Order id</label>

                                    <div class="control-group">

                                        <input class="vIntegerField" id="id_order_id" name="order_id" type="text"
                                               value="0">


                                    </div>

                                </div>


                            </div>

                        </div>

                        <div class="form-row field-identifier">


                            <div class="">


                                <div class="form-group">
                                    <label for="id_identifier" class="">Identifier</label>

                                    <div class="control-group">

                                        <input class="vTextField" id="id_identifier" maxlength="100" name="identifier"
                                               type="text">


                                    </div>

                                </div>


                            </div>

                        </div>

                    </fieldset>


                    <div class="inline-group" id="translations-group">
                        <h2>Bio</h2>


                        <div class="inline-related dynamic-translations" id="translations-0">
                            <h3><b>Bio:</b>&nbsp;<span class="inline_label">English</span>


                            </h3>


                            <fieldset class="module aligned ">


                                <div class="form-row field-bio">


                                    <div class="">


                                        <div class="form-group">
                                            <label for="id_translations-0-bio" class="">Bio</label>

                                            <div class="control-group">

                                                <textarea class="vLargeTextField" cols="40" id="id_translations-0-bio"
                                                          name="translations-0-bio" rows="10"></textarea>


                                            </div>

                                        </div>


                                    </div>

                                </div>

                            </fieldset>


                        </div>

                    </div>


                </div>

                <div class="form-actions fixed_bottom">
                    <div class="row">
                        <div class="col-md-12">
                            <input type="submit" value="Save" class="btn btn-primary" name="_save">

                        </div>
                    </div>
                </div>


            </div>
        </form>
    </div>


    <div class="clearfix" style="padding-bottom: 50px;"></div>
</div>
<link href="css/datetimepicker.css" type="text/css" media="all" rel="stylesheet">
<script type="text/javascript" src="js/bootstrap-datetimepicker.js"></script>
<script type="text/javascript" src="js/blog.js"></script>
<div ng-include src="'adminViews/partials/header.html'"></div>
<script>
    $(document).ready(function () {
        $("#txtEditor").Editor();
    });

    var idName = "";
    $(document).on("click", "#uploadImage1", function () {
        idName = "#backImage1";
        $.get("/getImages", function (response) {
            $("#InsertImage .modal-body").html("");
            $("#InsertImage .modal-body").append("<button class='uploadFiles' class='btn btn-default'>Upload Files</button><div id='myId' class='dropzone'></div>");
            $("#InsertImage .modal-body").append("<div id='thumbwrap'/></div><div style='clear: both;'></div> ");
            $("#thumbwrap").html("");
            $.each(response, function (k, data) {
                $("#thumbwrap").append("<img data-dismiss='modal' width=100 height=60  src='" + data.path + "'/>");

            });
        });
    });


    $(document).on('click', '#InsertImage img', function (e) {
        if (idName == "#backImage1") {
            $(idName).html('<img width=100 height=60 src="' + $(this).attr('src') + '"/>');
        } else {
            $(".Editor-editor").append('<img width=500 height=300 src="' + $(this).attr('src') + '"/>');
        }
        e.stopImmediatePropagation();
    });


    $(document).on("click", ".uploadFiles", function () {
        $("#myId").css("display", "block");
        var myDropzone = new Dropzone("div#myId", {
            url: "/uploadImages",
            maxFilesize: 1,

            init: function () {

                // You might want to show the submit button only when
                // files are dropped here:
                this.on("addedfile", function () {
                    // Show submit button here and/or inform user to click it.
                });
                this.on("success", function () {
                    myDropzone.removeAllFiles();
                    $.get("/getImages", function (response) {
                        $("#thumbwrap").html("");
                        $.each(response, function (k, data) {
                            $("#thumbwrap").append("<img data-dismiss='modal' width=100 height=60  src='" + data.path + "'/>");

                        });
                    });
                })

            }
        });
    });

</script>


<style>
    #myId {
        display: none;
    }

    #thumbwrap img {
        border: 1px solid silver;
        margin: 10px;
        float: left;
    }

</style>


<div class="content">


    <div class="inner"><h1>Blog &nbsp; <a href="/list-blogs-admin" class="small gray">Cancel</a></h1>
    </div>


    <div class="clearfix"></div>


    <div id="content-main">

        <form enctype="multipart/form-data" action="" method="post" id="add_edit_translation_form"
              class="form-horizontal">

            <div>

                <div class="inner">


                    <fieldset class="">

                        <h2>Settings</h2>
                        <div class="form-row">
                            <div class="">
                                <div class="form-group-checkbox">
                                    <label class="checkbox">
                                        <input id="id_active" name="active" checked="true" type="checkbox">
                                        <label class="vCheckboxLabel" for="id_active">Active</label>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="field-box">


                                <div class="form-group">
                                    <label for="backImage1" class="">Background Image</label>

                                    <div class="control-group">
                                        <a id="uploadImage1" href="#InsertImage" role="button" class="btn btn-default"
                                           data-toggle="modal"
                                           title="Insert Image">Choose / Upload Image</a>

                                        <div id="backImage1"></div>
                                    </div>

                                </div>

                            </div>
                        </div>
                        <div class="form-row">
                            <div class="field-box field-display required">
                                <div class="form-group">
                                    <label for="id_display_title" class="">Display title</label>

                                    <div class="control-group">

                                        <input class="vTextField" data-slug="slug" id="id_display_title" maxlength="250"
                                               name="display_title" type="text" value=""/>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="field-box field-publish required">
                                <div class="form-group">
                                    <label for="id_display_title" class="">Publish Date</label>

                                    <div class="control-group">

                                        <div id="aa91f17a1d2c470c8382c45eaa720e3c"
                                             class="input-append date form_datetime"><input id="datetime-picker_0"
                                                                                            name="publish_date_0"
                                                                                            type="text">
                                            <span class="add-on glyphicon glyphicon-calendar"><i
                                                    class="icon-th"></i></span></div>
                                        <script type="text/javascript">

                                            $("#aa91f17a1d2c470c8382c45eaa720e3c").datetimepicker({
                                                format: 'yyyy-mm-dd hh:ii:ss',
                                                startDate: '',
                                                endDate: '',
                                                weekStart: 0,
                                                daysOfWeekDisabled: [],
                                                autoclose: true,
                                                startView: 2,
                                                minView: 0,
                                                maxView: 4,
                                                todayBtn: false,
                                                todayHighlight: false,
                                                minuteStep: 5,
                                                pickerPosition: 'bottom-right',
                                                showMeridian: false,
                                                clearBtn: true,
                                                language: 'en'
                                            });</script>


                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="field-box field-authors required">
                                <div class="form-group">
                                    <label for="id_display_title" class="">Authors</label>

                                    <div class="control-group">

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="field-box field-title required">


                                <div class="form-group">
                                    <label for="id_title" class="">Page title</label>

                                    <div class="control-group">

                                        <input data-slug="slug" id="id_title" maxlength="100" name="title" type="text"
                                                >


                                    </div>

                                </div>

                            </div>
                        </div>


                        <div class="form-row">
                            <div class="field-box field-slug required">


                                <div class="form-group">
                                    <label for="id_slug" class="">Slug</label>

                                    <div class="control-group">

                                        <input id="id_slug" maxlength="100" name="slug" type="text"
                                                >


                                    </div>

                                </div>

                            </div>
                        </div>


                    </fieldset>

                    <fieldset class="">

                        <h2>Page content</h2>


                        <div class="form-row">
                            <div class="field-box field-page_content_extended_title required">


                                <div class="form-group">
                                    <label for="id_page_content_extended_title" class="">Extended title</label>

                                    <div class="control-group">

                                        <input id="id_page_content_extended_title" maxlength="250"
                                               name="page_content_extended_title" type="text"
                                                >


                                    </div>

                                </div>

                            </div>
                        </div>


                        <div class="form-row">
                            <div class="field-box field-page_content_excerpt required">


                                <div class="form-group">
                                    <label for="id_page_content_excerpt" class="">Excerpt</label>

                                    <div class="control-group">

                                        <textarea cols="40" id="id_page_content_excerpt" name="page_content_excerpt"
                                                  rows="10"></textarea>


                                    </div>

                                </div>

                            </div>
                        </div>


                        <div class="form-row">
                            <div class="field-box field-page_content_body required">


                                <div class="form-group">
                                    <label for="txtEditor" class="">Body</label>

                                    <div class="control-group">
                                        <textarea id="txtEditor" name="txtEditor"></textarea>
                                    </div>
                                </div>

                            </div>
                        </div>


                    </fieldset>

                    <fieldset class="">

                        <h2>Meta data</h2>


                        <div class="form-row">
                            <div class="field-box field-meta_data_meta_title ">


                                <div class="form-group">
                                    <label for="id_meta_data_meta_title" class="">Meta title</label>

                                    <div class="control-group">

                                        <input id="id_meta_data_meta_title" maxlength="250" name="meta_data_meta_title"
                                               type="text">


                                    </div>

                                </div>

                            </div>
                        </div>


                        <div class="form-row">
                            <div class="field-box field-meta_data_meta_description ">


                                <div class="form-group">
                                    <label for="id_meta_data_meta_description" class="">Meta description</label>

                                    <div class="control-group">

                                        <textarea cols="40" id="id_meta_data_meta_description"
                                                  name="meta_data_meta_description" rows="10"></textarea>


                                    </div>

                                </div>

                            </div>
                        </div>


                    </fieldset>

                </div>

                <div class="form-actions fixed_bottom">
                    <div class="row">
                        <div class="col-md-12">
                            <input type="submit" value="Save" class="btn btn-primary" name="_save">

                        </div>
                    </div>
                </div>


            </div>
        </form>
    </div>


    <div class="clearfix" style="padding-bottom: 50px;"></div>
</div>

